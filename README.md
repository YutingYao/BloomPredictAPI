# è“è—»é¢„æµ‹ç³»ç»ŸAPI - å®Œæ•´ç‰ˆ

æ¬¢è¿ä½¿ç”¨è“è—»é¢„æµ‹ç³»ç»ŸAPIï¼Œè¿™æ˜¯ä¸€ä¸ªæ™ºèƒ½ã€é«˜æ•ˆã€æ˜“ç”¨çš„è“è—»æ°´åé¢„æµ‹æœåŠ¡å¹³å°ï¼Œä¸“ä¸ºå¤ªæ¹–æµåŸŸæ°´ç¯å¢ƒç›‘æµ‹è®¾è®¡ã€‚

## ğŸš€ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æä¾›äº†ä¸‰ä¸ªä¸åŒå¤æ‚åº¦çš„APIç‰ˆæœ¬ï¼Œæ»¡è¶³ä»ç ”ç©¶å¼€å‘åˆ°ç”Ÿäº§éƒ¨ç½²çš„å…¨æ–¹ä½éœ€æ±‚ï¼š

- **V1ç‰ˆæœ¬**: å®Œæ•´åŠŸèƒ½ç‰ˆæœ¬ï¼Œé€‚åˆç ”ç©¶å’Œæ·±åº¦å®šåˆ¶
- **V2ç‰ˆæœ¬**: ç®€åŒ–ç‰ˆæœ¬ï¼Œå¹³è¡¡äº†åŠŸèƒ½å’Œæ˜“ç”¨æ€§  
- **V3ç‰ˆæœ¬**: æç®€ç‰ˆæœ¬ï¼Œä»…éœ€4ä¸ªå‚æ•°ï¼Œé€‚åˆå¿«é€Ÿé›†æˆ

## ğŸ“Š é¡¹ç›®ç»“æ„

```
/home/devbox/project/--API/
â”œâ”€â”€ ğŸ“ src/                        # æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ ğŸ“ config/                 # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ settings.py           # ç³»ç»Ÿé…ç½®
â”‚   â”œâ”€â”€ ğŸ“ models/                 # æ¨¡å‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ model_manager.py      # æ¨¡å‹åŠ è½½å’Œç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“ schemas/                # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ request_schemas.py    # V1è¯·æ±‚æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ request_schemas_v2.py # V2è¯·æ±‚æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ request_schemas_v3.py # V3è¯·æ±‚æ¨¡å‹
â”‚   â”‚   â””â”€â”€ response_schemas.py   # å“åº”æ¨¡å‹
â”‚   â”œâ”€â”€ ğŸ“ services/               # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ prediction_service.py    # V1é¢„æµ‹æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ prediction_service_v2.py # V2é¢„æµ‹æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ prediction_service_v3.py # V3é¢„æµ‹æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ mock_prediction_service_v3.py # V3æ¨¡æ‹ŸæœåŠ¡
â”‚   â”‚   â””â”€â”€ historical_data_service.py   # å†å²æ•°æ®æœåŠ¡
â”‚   â””â”€â”€ ğŸ“ utils/                  # å·¥å…·åº“
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ data_processor.py     # æ•°æ®å¤„ç†
â”‚       â””â”€â”€ validators.py         # æ•°æ®éªŒè¯
â”œâ”€â”€ ğŸ“ models/                     # è®­ç»ƒå¥½çš„MLæ¨¡å‹
â”‚   â”œâ”€â”€ 00-lstm_model_data_*.pkl  # LSTMæ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€â”€ 00-GRUD_model_data_*.pkl  # GRU-Dæ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€â”€ 00-TCN_model_data_*.pkl   # TCNæ¨¡å‹æ–‡ä»¶
â”‚   â””â”€â”€ 00-XGB_model_data_*.pkl   # XGBoostæ¨¡å‹æ–‡ä»¶
â”œâ”€â”€ ğŸ“ data/                       # å†å²æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ 002-æ°”è±¡-*-merged_with_weather_with_composite_features_processed.csv
â”œâ”€â”€ ğŸ“ test/                       # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ test_api.py               # APIæµ‹è¯•
â”‚   â”œâ”€â”€ test_model_loading.py     # æ¨¡å‹åŠ è½½æµ‹è¯•
â”‚   â””â”€â”€ test_*.py                 # å…¶ä»–æµ‹è¯•
â”œâ”€â”€ ğŸ“ docs/                       # æ–‡æ¡£
â”‚   â”œâ”€â”€ APIç®€åŒ–æ€»ç»“-20250817.md    # APIç®€åŒ–æ€»ç»“
â”‚   â”œâ”€â”€ V3ç‰ˆæœ¬ç®€åŒ–APIä½¿ç”¨æŒ‡å—.md   # V3ä½¿ç”¨æŒ‡å—
â”‚   â””â”€â”€ *.md                      # å…¶ä»–æ–‡æ¡£
â”œâ”€â”€ ğŸ“ logs/                       # æ—¥å¿—æ–‡ä»¶
â”‚   â”œâ”€â”€ api.log                   # V1æ—¥å¿—
â”‚   â”œâ”€â”€ api_v2.log               # V2æ—¥å¿—
â”‚   â””â”€â”€ api_v3.log               # V3æ—¥å¿—
â”œâ”€â”€ main.py                        # V1ä¸»ç¨‹åº
â”œâ”€â”€ main_v2.py                     # V2ä¸»ç¨‹åº
â”œâ”€â”€ main_v3.py                     # V3ä¸»ç¨‹åº
â”œâ”€â”€ start_server.py                # æœåŠ¡å™¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ demo_api_v2.py                 # V2æ¼”ç¤º
â”œâ”€â”€ demo_api_v3.py                 # V3æ¼”ç¤º
â”œâ”€â”€ compare_versions.py            # ç‰ˆæœ¬å¯¹æ¯”å·¥å…·
â”œâ”€â”€ requirements.txt               # ä¾èµ–åˆ—è¡¨
â””â”€â”€ README.md                     # æœ¬æ–‡æ¡£
```

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- è™šæ‹Ÿç¯å¢ƒ (æ¨è)
- 8GB+ å†…å­˜ (ç”¨äºåŠ è½½MLæ¨¡å‹)

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒå®‰è£…ä¾èµ–
pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/
```

### å¯åŠ¨æœåŠ¡

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶å¯åŠ¨æœåŠ¡
source venv/bin/activate && python start_server.py
```

æˆ–è€…é€‰æ‹©ç‰¹å®šç‰ˆæœ¬ï¼š

```bash
# V1ç‰ˆæœ¬ (ç«¯å£8000)
python main.py

# V2ç‰ˆæœ¬ (ç«¯å£8001) - æ¨è
python main_v2.py  

# V3ç‰ˆæœ¬ (ç«¯å£8002) - æç®€ç‰ˆ
python main_v3.py
```

## ğŸ“‹ APIç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | V1ç‰ˆæœ¬ | V2ç‰ˆæœ¬ | V3ç‰ˆæœ¬ |
|------|--------|--------|--------|
| å‚æ•°æ•°é‡ | 720+ | 6-8ä¸ª | **4ä¸ª** |
| å­¦ä¹ æˆæœ¬ | æé«˜ | ä¸­ç­‰ | **æä½** |
| é…ç½®å¤æ‚åº¦ | æå¤æ‚ | ä¸­ç­‰ | **é›¶é…ç½®** |
| ç”¨æˆ·ä½“éªŒ | æå·® | ä¸€èˆ¬ | **æä½³** |
| ä¸šåŠ¡é€‚ç”¨æ€§ | ç ”ç©¶ç”¨ | å¼€å‘ç”¨ | **ç”Ÿäº§ç”¨** |
| APIç«¯å£ | 8000 | 8001 | 8002 |
| æ¨èåœºæ™¯ | æ·±åº¦ç ”ç©¶ | å¹³è¡¡ä½¿ç”¨ | å¿«é€Ÿé›†æˆ |

## ğŸŒŸ V3ç‰ˆæœ¬ - æç®€API (æ¨è)

### æ ¸å¿ƒç‰¹æ€§

- **æç®€æ¥å£**: ä»…éœ€4ä¸ªæ ¸å¿ƒå‚æ•°
- **é›¶é…ç½®**: å…¨è‡ªåŠ¨æ•°æ®å¤„ç†å’Œæ¨¡å‹ç®¡ç†
- **æ™ºèƒ½é¢„æµ‹**: åŸºäºå½“å‰æ—¥æœŸè‡ªåŠ¨è·å–å†å²æ•°æ®

### å¿«é€Ÿè°ƒç”¨ç¤ºä¾‹

```bash
curl -X POST 'http://localhost:8002/api/v3/predict' \
  -H 'Content-Type: application/json' \
  -d '{
    "current_date": "2024-06-01",
    "predict_days": 7,
    "station": "èƒ¥æ¹–å¿ƒ",
    "model_type": "grud"
  }'
```

### Pythonå®¢æˆ·ç«¯ç¤ºä¾‹

```python
import requests

def predict_algae_v3():
    """V3ç‰ˆæœ¬é¢„æµ‹ç¤ºä¾‹"""
    url = "http://localhost:8002/api/v3/predict"
    
    payload = {
        "current_date": "2024-06-01",  # å½“å‰æ—¥æœŸ
        "predict_days": 7,             # é¢„æµ‹å¤©æ•°
        "station": "èƒ¥æ¹–å¿ƒ",            # ç›‘æµ‹ç«™ç‚¹
        "model_type": "grud"           # æ¨¡å‹ç±»å‹
    }
    
    response = requests.post(url, json=payload)
    result = response.json()
    
    if result["success"]:
        print(f"é¢„æµ‹æˆåŠŸï¼")
        for i, pred in enumerate(result["data"]["prediction"], 1):
            print(f"ç¬¬{i}å¤©: {pred:.2f}")
    else:
        print(f"é¢„æµ‹å¤±è´¥: {result['error']}")

predict_algae_v3()
```

## ğŸ› ï¸ V2ç‰ˆæœ¬ - å¹³è¡¡ç‰ˆ

V2ç‰ˆæœ¬åœ¨åŠŸèƒ½å®Œæ•´æ€§å’Œæ˜“ç”¨æ€§ä¹‹é—´å–å¾—äº†å¾ˆå¥½çš„å¹³è¡¡ï¼Œæ”¯æŒæ›´å¤šé«˜çº§åŠŸèƒ½ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- **æ™ºèƒ½å†å²æ•°æ®è·å–**: è‡ªåŠ¨ä»CSVæ–‡ä»¶åŠ è½½60å¤©å†å²æ•°æ®
- **æ··åˆæ¨¡å¼**: æ”¯æŒå®æ—¶æ•°æ®è¡¥å……
- **æ‰¹é‡é¢„æµ‹**: å¤šç«™ç‚¹å¹¶è¡Œé¢„æµ‹
- **æ•°æ®è´¨é‡éªŒè¯**: å†…ç½®æ•°æ®æ£€æŸ¥

### ä½¿ç”¨ç¤ºä¾‹

```python
import requests

# åŸºç¡€é¢„æµ‹
def predict_v2_basic():
    url = "http://localhost:8001/api/v2/predict"
    payload = {
        "station": "èƒ¥æ¹–å¿ƒ",
        "model_type": "grud",
        "predict_days": 7,
        "data_mode": "auto_historical",
        "end_date": "2024-05-31"
    }
    return requests.post(url, json=payload).json()

# æ··åˆæ¨¡å¼ï¼ˆå†å² + å®æ—¶æ•°æ®ï¼‰
def predict_v2_hybrid():
    url = "http://localhost:8001/api/v2/predict"
    payload = {
        "station": "èƒ¥æ¹–å¿ƒ",
        "model_type": "grud", 
        "predict_days": 5,
        "data_mode": "hybrid",
        "end_date": "2024-05-31",
        "supplementary_data": [
            {"date": "2024-05-30", "temperature": 27.1, "oxygen": 7.9, "pH": 7.9},
            {"date": "2024-05-31", "temperature": 28.0, "oxygen": 7.5, "pH": 8.0}
        ]
    }
    return requests.post(url, json=payload).json()
```

## ğŸ¯ æ”¯æŒçš„ç«™ç‚¹å’Œæ¨¡å‹

### ç›‘æµ‹ç«™ç‚¹ (6ä¸ª)

| ç«™ç‚¹åç§° | è‹±æ–‡åç§° | æ¨èæ¨¡å‹ | ç²¾åº¦æå‡ |
|---------|----------|----------|---------|
| èƒ¥æ¹–å¿ƒ | Xuhu Center | grud | 77.4% |
| é”¡ä¸œæ°´å‚ | Xidong Water Plant | grud | 55.1% |
| å¹³å°å±± | Pingtai Mountain | xgboost | 100% |
| tuoshan | Tuoshan Mountain | grud | 79.8% |
| lanshanzui | Lanshan Cape | grud | 28.8% |
| äº”é‡Œæ¹–å¿ƒ | Wulihu Center | grud | 42.9% |

### é¢„æµ‹æ¨¡å‹ (4ç§)

| æ¨¡å‹ç±»å‹ | åç§° | ç‰¹ç‚¹ | æ¨èåº¦ |
|---------|------|------|--------|
| grud | GRU-D | å¤„ç†ç¼ºå¤±æ•°æ®ï¼Œç²¾åº¦é«˜ | â­â­â­â­â­ |
| lstm | LSTM | åŸºå‡†æ¨¡å‹ï¼Œç¨³å®šå¯é  | â­â­â­ |
| tcn | TCN | å¹¶è¡Œè®¡ç®—ï¼Œé€Ÿåº¦å¿« | â­â­â­ |
| xgboost | XGBoost | åœ¨å¹³å°å±±è¡¨ç°æœ€ä½³ | â­â­â­â­ |

## ğŸ“š APIç«¯ç‚¹æ€»è§ˆ

### V3ç‰ˆæœ¬ç«¯ç‚¹ (æ¨è)

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/v3/predict` | POST | æç®€é¢„æµ‹æ¥å£ |
| `/api/v3/batch-predict` | POST | æ‰¹é‡é¢„æµ‹ |
| `/api/v3/validate` | POST | è¯·æ±‚éªŒè¯ |

### V2ç‰ˆæœ¬ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/v2/predict` | POST | æ ¸å¿ƒé¢„æµ‹æ¥å£ |
| `/api/v2/batch-predict` | POST | æ‰¹é‡é¢„æµ‹ |
| `/api/v2/validate-request` | POST | è¯·æ±‚éªŒè¯ |
| `/api/v2/data-info/{station}` | GET | ç«™ç‚¹æ•°æ®æ‘˜è¦ |
| `/api/v2/historical-data` | POST | è·å–å†å²æ•°æ® |

### é€šç”¨ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/docs` | GET | APIæ–‡æ¡£ (Swagger) |
| `/redoc` | GET | APIæ–‡æ¡£ (ReDoc) |

## ğŸ”§ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **Webæ¡†æ¶**: FastAPI 0.104.1
- **å¼‚æ­¥æ”¯æŒ**: Uvicorn + AsyncIO
- **æœºå™¨å­¦ä¹ **: PyTorch 2.1.1, XGBoost 2.0.2
- **æ•°æ®å¤„ç†**: Pandas 2.0.3, NumPy 1.24.3
- **æ•°æ®éªŒè¯**: Pydantic 2.5.0

### æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FastAPI Application          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Router Layer (è·¯ç”±å±‚)                 â”‚
â”‚  â”œâ”€â”€ V1: main.py                      â”‚
â”‚  â”œâ”€â”€ V2: main_v2.py                   â”‚
â”‚  â””â”€â”€ V3: main_v3.py                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Service Layer (æœåŠ¡å±‚)                â”‚
â”‚  â”œâ”€â”€ PredictionService (é¢„æµ‹æœåŠ¡)      â”‚
â”‚  â”œâ”€â”€ HistoricalDataService (æ•°æ®æœåŠ¡)  â”‚
â”‚  â””â”€â”€ ModelManager (æ¨¡å‹ç®¡ç†)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Model Layer (æ¨¡å‹å±‚)                  â”‚
â”‚  â”œâ”€â”€ LSTM Models                      â”‚
â”‚  â”œâ”€â”€ GRU-D Models                     â”‚
â”‚  â”œâ”€â”€ TCN Models                       â”‚
â”‚  â””â”€â”€ XGBoost Models                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Layer (æ•°æ®å±‚)                   â”‚
â”‚  â””â”€â”€ CSV Historical Data Files        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµç¨‹

```
ç”¨æˆ·è¯·æ±‚ â†’ å‚æ•°éªŒè¯ â†’ å†å²æ•°æ®è·å– â†’ æ•°æ®é¢„å¤„ç† â†’ æ¨¡å‹é¢„æµ‹ â†’ ç»“æœè¿”å›
    â†“         â†“           â†“           â†“           â†“           â†“
 Schemaæ£€æŸ¥  æ¨¡å‹å¯ç”¨æ€§   CSVæ–‡ä»¶è¯»å–   ç‰¹å¾å·¥ç¨‹     MLæ¨ç†    JSONå“åº”
```

## ğŸ§ª æµ‹è¯•å’Œæ¼”ç¤º

### è¿è¡Œæµ‹è¯•

```bash
# åŸºç¡€APIæµ‹è¯•
python test/test_api.py

# æ¨¡å‹åŠ è½½æµ‹è¯•
python test/test_model_loading.py

# ç»¼åˆåŠŸèƒ½æµ‹è¯•
python test/test_comprehensive_v2.py
```

### æ¼”ç¤ºè„šæœ¬

```bash
# V2ç‰ˆæœ¬æ¼”ç¤º
python demo_api_v2.py

# V3ç‰ˆæœ¬æ¼”ç¤º
python demo_api_v3.py

# ç‰ˆæœ¬å¯¹æ¯”æ¼”ç¤º
python compare_versions.py

# 30å¤©é¢„æŠ¥æµ‹è¯•
python test_30_days_forecast.py
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ¨¡å‹ç®¡ç†
- **æ‡’åŠ è½½**: æŒ‰éœ€åŠ è½½æ¨¡å‹ï¼ŒèŠ‚çœå†…å­˜
- **ç¼“å­˜æœºåˆ¶**: å·²åŠ è½½æ¨¡å‹ä¿æŒåœ¨å†…å­˜ä¸­
- **å¹¶å‘æ§åˆ¶**: åˆç†æ§åˆ¶å¹¶å‘é¢„æµ‹è¯·æ±‚

### æ•°æ®å¤„ç†
- **å¼‚æ­¥IO**: éé˜»å¡æ–‡ä»¶è¯»å–
- **æ•°æ®éªŒè¯**: Pydanticé«˜æ•ˆéªŒè¯
- **å†…å­˜ä¼˜åŒ–**: åŠæ—¶é‡Šæ”¾å¤§å‹æ•°æ®ç»“æ„

### APIå“åº”
- **å¼‚æ­¥å¤„ç†**: æ‰€æœ‰ç«¯ç‚¹æ”¯æŒasync/await
- **å¹¶è¡Œé¢„æµ‹**: æ‰¹é‡è¯·æ±‚æ”¯æŒå¹¶è¡Œå¤„ç†
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ¨¡å‹æ–‡ä»¶ç¼ºå¤±**
   ```bash
   # æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
   ls -la models/
   # ç¡®ä¿å­˜åœ¨24ä¸ª.pklæ¨¡å‹æ–‡ä»¶ï¼ˆ6ä¸ªç«™ç‚¹ Ã— 4ç§æ¨¡å‹ï¼‰
   ```

2. **ç«¯å£è¢«å ç”¨**
   ```bash
   # æ£€æŸ¥ç«¯å£ä½¿ç”¨
   lsof -i :8000  # V1
   lsof -i :8001  # V2  
   lsof -i :8002  # V3
   ```

3. **ä¾èµ–é—®é¢˜**
   ```bash
   # é‡æ–°å®‰è£…ä¾èµ–
   pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/
   ```

4. **å†…å­˜ä¸è¶³**
   ```bash
   # æ£€æŸ¥ç³»ç»Ÿå†…å­˜
   free -h
   # å»ºè®®è‡³å°‘8GBå†…å­˜ç”¨äºåŠ è½½æ‰€æœ‰æ¨¡å‹
   ```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹ä¸åŒç‰ˆæœ¬çš„æ—¥å¿—
tail -f logs/api.log      # V1æ—¥å¿—
tail -f logs/api_v2.log   # V2æ—¥å¿—
tail -f logs/api_v3.log   # V3æ—¥å¿—
```

## ğŸ”„ ç‰ˆæœ¬è¿ç§»æŒ‡å—

### ä»V1è¿ç§»åˆ°V2

**V1è¯·æ±‚**:
```json
{
  "station": "èƒ¥æ¹–å¿ƒ",
  "model_type": "grud",
  "predict_days": 7,
  "input_data": { /* 720ä¸ªæ•°å€¼ */ }
}
```

**V2è¯·æ±‚**:
```json
{
  "station": "èƒ¥æ¹–å¿ƒ",
  "model_type": "grud", 
  "predict_days": 7,
  "data_mode": "auto_historical",
  "end_date": "2024-05-31"
}
```

### ä»V2è¿ç§»åˆ°V3

**V2è¯·æ±‚**:
```json
{
  "station": "èƒ¥æ¹–å¿ƒ",
  "model_type": "grud",
  "predict_days": 7, 
  "data_mode": "auto_historical",
  "end_date": "2024-05-31"
}
```

**V3è¯·æ±‚**:
```json
{
  "current_date": "2024-06-01",
  "predict_days": 7,
  "station": "èƒ¥æ¹–å¿ƒ",
  "model_type": "grud"
}
```

## ğŸ“‹ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°ç«™ç‚¹

1. åœ¨`data/`ç›®å½•æ·»åŠ ç«™ç‚¹CSVæ–‡ä»¶
2. åœ¨`models/`ç›®å½•æ·»åŠ å¯¹åº”çš„4ç§æ¨¡å‹æ–‡ä»¶
3. æ›´æ–°`src/config/settings.py`ä¸­çš„ç«™ç‚¹é…ç½®
4. è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸

### æ·»åŠ æ–°æ¨¡å‹

1. è®­ç»ƒæ–°æ¨¡å‹å¹¶ä¿å­˜ä¸º`.pkl`æ–‡ä»¶
2. æ›´æ–°`src/models/model_manager.py`
3. åœ¨æ‰€æœ‰schemaæ–‡ä»¶ä¸­æ·»åŠ æ–°çš„model_typeé€‰é¡¹
4. æ›´æ–°æ–‡æ¡£å’Œæµ‹è¯•

### ä»£ç è§„èŒƒ

- éµå¾ªPEP 8ç¼–ç è§„èŒƒ
- ä½¿ç”¨ç±»å‹æç¤º (Type Hints)
- ç¼–å†™å……åˆ†çš„æ–‡æ¡£å­—ç¬¦ä¸²
- ä¿æŒå•ä¸€èŒè´£åŸåˆ™
- æ·»åŠ å¿…è¦çš„å•å…ƒæµ‹è¯•

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. **Fork** é¡¹ç›®åˆ°æ‚¨çš„GitHubè´¦æˆ·
2. **åˆ›å»º** åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. **æäº¤** æ‚¨çš„ä¿®æ”¹ (`git commit -m 'Add amazing feature'`)
4. **æ¨é€** åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. **åˆ›å»º** Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **APIæ–‡æ¡£**: è®¿é—® `/docs` ç«¯ç‚¹æŸ¥çœ‹å®Œæ•´APIæ–‡æ¡£
- **æ¼”ç¤ºè„šæœ¬**: è¿è¡Œé¡¹ç›®ä¸­çš„æ¼”ç¤ºæ–‡ä»¶äº†è§£ç”¨æ³•
- **æ—¥å¿—æ–‡ä»¶**: æŸ¥çœ‹ `logs/` ç›®å½•äº†è§£è¿è¡ŒçŠ¶æ€
- **æµ‹è¯•å¥—ä»¶**: è¿è¡Œ `test/` ç›®å½•ä¸­çš„æµ‹è¯•æ–‡ä»¶

---

## ğŸ¯ æ€»ç»“

è“è—»é¢„æµ‹ç³»ç»ŸAPIé€šè¿‡ä¸‰ä¸ªç‰ˆæœ¬çš„è¿­ä»£ï¼Œå®ç°äº†ä»ç ”ç©¶å·¥å…·åˆ°ç”Ÿäº§çº§æœåŠ¡çš„å®Œç¾è½¬å˜ï¼š

- **V1**: åŠŸèƒ½å®Œæ•´ï¼Œé€‚åˆæ·±åº¦ç ”ç©¶å’Œå®šåˆ¶å¼€å‘
- **V2**: å¹³è¡¡æ˜“ç”¨æ€§å’ŒåŠŸèƒ½æ€§ï¼Œé€‚åˆå¤§å¤šæ•°åº”ç”¨åœºæ™¯  
- **V3**: æç®€è®¾è®¡ï¼Œä»…éœ€4ä¸ªå‚æ•°ï¼Œé€‚åˆå¿«é€Ÿé›†æˆå’Œç”Ÿäº§éƒ¨ç½²

é€‰æ‹©é€‚åˆæ‚¨éœ€æ±‚çš„ç‰ˆæœ¬ï¼Œå¼€å§‹é¢„æµ‹å¤ªæ¹–è“è—»æ°´åå§ï¼ ğŸŒŠ